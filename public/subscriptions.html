<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hakuna Matata Gaming Cafe — Subscriptions</title>

  <!-- Fonts & Razorpay -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --primary-glow: #c0c0c0;      /* Silver */
      --secondary-glow: #a9a9a9;    /* Darker silver for background */
      --dark-bg-main: #0d0d1a;
      --card-bg-main: rgba(20, 25, 40, 0.6);
      --text-color-main: #f0f0f0;
      --border-color-main: rgba(192, 192, 192, 0.25); /* Silver border */
    }

    html {
        scroll-behavior: smooth;
    }

    body {
      background-color: var(--dark-bg-main);
      background-image: radial-gradient(circle at top right, var(--secondary-glow), transparent 40%),
                        radial-gradient(circle at bottom left, var(--primary-glow), transparent 40%);
      background-size: 200% 200%;
      animation: background-pan 20s ease-in-out infinite;
      color: var(--text-color-main);
      font-family: 'Poppins', sans-serif;
      padding-top: 90px; /* Added padding for fixed header */
    }

    @keyframes background-pan {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    h1, h2, h3 {
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      text-shadow: 0 0 5px var(--primary-glow), 0 0 10px var(--primary-glow);
    }

    .site-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(13, 13, 26, 0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        z-index: 100;
        border-bottom: 1px solid var(--border-color-main);
    }

    .card {
      background-color: var(--card-bg-main);
      border: 1px solid var(--border-color-main);
      border-radius: 16px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      border-color: var(--primary-glow);
      box-shadow: 0 0 20px var(--primary-glow);
    }
    
    .btn {
      background: var(--primary-glow);
      color: var(--dark-bg-main);
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    .btn:hover {
      box-shadow: 0 0 20px var(--primary-glow);
      filter: brightness(1.2);
    }
    
    .badge {
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border-color-main);
      color: var(--text-color-main);
      padding: .25rem .75rem;
      border-radius: .5rem;
      font-size: .75rem;
      font-weight: 600;
    }

    .input {
      border: 1px solid var(--border-color-main);
      border-radius: 8px;
      padding: .75rem .9rem;
      width: 100%;
      background: rgba(0,0,0,0.3);
      color: var(--text-color-main);
      transition: all 0.3s ease;
    }
    .input:focus {
      outline: none;
      border-color: var(--primary-glow);
      box-shadow: 0 0 10px var(--primary-glow);
    }
    
    .toast{
      position:fixed; left:50%; transform:translateX(-50%); top:-120px;
      background:var(--primary-glow); color:var(--dark-bg-main); padding:12px 16px; border-radius:10px;
      box-shadow:0 10px 25px rgba(224, 224, 224, .45); font-weight:800; z-index:1000;
      transition: top .5s ease;
    }
    .toast.show{ top: 18px }

    /* Theme for Details card */
    #details-card .card {
      --primary-glow: #9f55ff; /* Purple */
      --border-color-main: rgba(159, 85, 255, 0.25);
    }

    /* Theme for Gold plans */
    #plans-grid-gold .card, #gold-selector {
      --primary-glow: #CFB53B; /* Metallic Gold */
      --border-color-main: rgba(207, 181, 59, 0.25);
    }
    
    #plans-grid-gold .btn {
      background: linear-gradient(45deg, #EAD68C, #CFB53B, #A98E2E);
      color: #111;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3),
                  inset 0 2px 2px rgba(255,255,255,0.4);
    }

    #plans-grid-gold .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 14px rgba(0,0,0,0.4),
                  inset 0 3px 3px rgba(255,255,255,0.5);
      filter: brightness(1.1);
    }

    /* Theme for Diamond plans */
    #plans-grid-diamond .card, #diamond-selector {
      --primary-glow: #b9f2ff; /* Icy Blue Diamond */
      --border-color-main: rgba(185, 242, 255, 0.25);
    }

    /* Animation for selector cards */
    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 0 20px var(--primary-glow);
      }
      50% {
        box-shadow: 0 0 35px var(--primary-glow), 0 0 10px var(--primary-glow) inset;
      }
    }

    .plan-selector-card {
        animation: pulse-glow 3s ease-in-out infinite;
    }

    .plan-selector-card:hover {
        animation-play-state: paused;
        transform: translateY(-10px);
    }
    
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.7);
        backdrop-filter: blur(5px);
    }
    .modal-content {
        position: relative;
        margin: 15% auto;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        background: var(--card-bg-main);
        border: 1px solid var(--border-color-main);
        border-radius: 16px;
    }
    .close-btn {
        color: #aaa;
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

  </style>
</head>
<body class="text-slate-100 min-h-screen flex flex-col">
  <header class="site-header">
    <div class="max-w-6xl mx-auto w-full px-4 py-6 flex items-center justify-between">
        <div class="flex items-center gap-3">
        <img src="logo.jpeg" alt="Hakuna Matata Gaming Logo" class="w-10 h-10 rounded-xl">
        <div>
            <h1 class="text-xl font-bold">Hakuna Matata Gaming</h1>
            <p class="text-sm text-slate-400">Subscriptions for PS5 & more</p>
        </div>
        </div>
        <nav class="hidden sm:flex items-center gap-4">
            <a href="index.html" class="text-slate-300 hover:text-white transition-colors">Home</a>
            <a href="gaming.html" class="text-slate-300 hover:text-white transition-colors">Gaming</a>
            <a href="menu.html" class="text-slate-300 hover:text-white transition-colors">Food</a>
        </nav>

        <!-- Mobile Hamburger (added) -->
        <button id="menu-btn" class="sm:hidden text-slate-300 focus:outline-none text-2xl">
          ☰
        </button>
    </div>

    <!-- Mobile Menu (added) -->
    <div id="mobile-menu" class="hidden sm:hidden flex-col bg-[rgba(13,13,26,0.95)] px-4 pb-4">
      <a href="index.html" class="block py-2 text-slate-300 hover:text-white">Home</a>
      <a href="gaming.html" class="block py-2 text-slate-300 hover:text-white">Gaming</a>
      <a href="menu.html" class="block py-2 text-slate-300 hover:text-white">Food</a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-6xl mx-auto w-full px-4 flex-grow">
    <!-- Customer details -->
    <section id="details-card">
      <div class="card p-6 md:p-8">
        <h2 class="text-2xl font-bold mb-1 text-center">Your Details</h2>
        <p class="text-slate-400 mb-5 text-center">We’ll send your payment confirmation and booking help on WhatsApp.</p>

        <form class="grid md:grid-cols-2 gap-4">
          <div>
            <label for="name" class="text-sm text-slate-300">Full name</label>
            <input id="name" class="input mt-1" placeholder="e.g., Priya Sharma" required />
          </div>
          <div>
            <label for="wa" class="text-sm text-slate-300">WhatsApp (India)</label>
            <div class="mt-1 flex gap-2">
              <span class="px-3 grid place-items-center rounded-lg border border-[var(--border-color-main)] text-slate-300 bg-black/30">+91</span>
              <input id="wa" class="input" inputmode="numeric" maxlength="10" placeholder="9876543210" required />
            </div>
            <p class="text-xs text-slate-500 mt-2">Enter a 10-digit Indian mobile number.</p>
          </div>
        </form>
      </div>
    </section>

    <!-- Plan Advisor -->
    <section class="mt-8 text-center">
        <button id="planAdvisorBtn" class="btn text-lg px-6 py-3">✨ Get a Plan Recommendation</button>
    </section>

    <!-- Plans -->
    <section class="mt-8 text-center">
      <h2 class="text-2xl font-bold mb-6">Available Plans</h2>

      <!-- Plan Selector Flowchart -->
      <div class="grid sm:grid-cols-3 gap-6 mb-16 max-w-4xl mx-auto">
        <a href="#silver-plans" class="card p-8 flex flex-col items-center justify-center text-center no-underline plan-selector-card">
          <h3 class="text-xl font-bold">Silver Plan</h3>
          <p class="text-slate-400 text-sm mt-1">7 Days Access</p>
        </a>
        <a href="#gold-plans" id="gold-selector" class="card p-8 flex flex-col items-center justify-center text-center no-underline plan-selector-card">
          <h3 class="text-xl font-bold">Gold Plan</h3>
          <p class="text-slate-400 text-sm mt-1">14 Days Access</p>
        </a>
        <a href="#diamond-plans" id="diamond-selector" class="card p-8 flex flex-col items-center justify-center text-center no-underline plan-selector-card">
          <h3 class="text-xl font-bold">Diamond Plan</h3>
          <p class="text-slate-400 text-sm mt-1">21 Days Access</p>
        </a>
      </div>

      <div id="silver-plans" class="pt-8">
        <h3 class="text-lg font-semibold text-slate-300 mb-6" style="text-shadow: none;">7 Days Plan (Silver)</h3>
        <div id="plans-grid-silver" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 text-left mb-12"></div>
        <p class="text-xs text-slate-500 mt-4">All plans valid for one month from payment date. Plans once subscribed cannot be cancelled.</p>
      </div>

      <div id="gold-plans" class="pt-8">
        <h3 class="text-lg font-semibold text-slate-300 mb-6" style="text-shadow: none;">14 Days Plan (Gold)</h3>
        <div id="plans-grid-gold" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 text-left mb-12"></div>
         <p class="text-xs text-slate-500 mt-4">All plans valid for one month from payment date. Plans once subscribed cannot be cancelled.</p>
      </div>

      <div id="diamond-plans" class="pt-8">
        <h3 class="text-lg font-semibold text-slate-300 mb-6" style="text-shadow: none;">21 Days Plan (Diamond)</h3>
        <div id="plans-grid-diamond" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 text-left"></div>
         <p class="text-xs text-slate-500 mt-4">All plans valid for one month from payment date. Plans once subscribed cannot be cancelled.</p>
      </div>
    </section>
  </main>
  
  <div id="toast" class="toast"></div>

  <!-- Advisor Modal -->
  <div id="advisorModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Plan Advisor</h2>
        <p>Describe your gaming habits, and we'll suggest the best plan for you!</p>
        <textarea id="advisorPrompt" class="input mt-4" rows="4" placeholder="e.g., 'I play a couple of times a week with friends' or 'I'm a hardcore gamer who needs a lot of hours'"></textarea>
        <button id="getAdvisorBtn" class="btn mt-4 w-full">Get Recommendation</button>
    </div>
  </div>

  <section id="contact" class="max-w-6xl mx-auto w-full px-4 py-10 mt-8">
    <h2 class="text-2xl font-bold mb-6 text-center">Contact Us</h2>
    <div class="grid md:grid-cols-2 gap-8">
      <div class="card p-6">
        <p><strong>Phone:</strong> <a href="tel:+919348091035" class="text-[var(--primary-glow)] hover:underline">9348091035</a></p>
        <p class="mt-2"><strong>Email:</strong> <a href="mailto:hakunaxmatataper@gmail.com" class="text-[var(--primary-glow)] hover:underline">hakunaxmatataper@gmail.com</a></p>
        <p class="mt-2"><strong>Address:</strong><br>
          Hakuna Matata Gaming Cafe,<br>
          No 42 Christ Lane, Hosur Main Road,<br>
          Near Mekeba Restaurant, SG Palya, 560029
        </p>
      </div>
      <div class="card p-2">
        <iframe class="w-full h-full rounded-lg" src="https://www.google.com/maps?q=Hakuna%20matata%20gaming%20cafe,%20no%2042%20christ%20lane%20hosur%20main%20road%20near%20mekeba%20restaurant,%20sg%20palya,%20560029&output=embed"
          allowfullscreen loading="lazy"></iframe>
      </div>
    </div>
  </section>

  <footer class="max-w-6xl mx-auto w-full px-4 py-10 text-sm text-slate-400 text-center mt-auto border-t border-[var(--border-color-main)]">
    <p>© <span id="year"></span> Hakuna Matata Gaming Cafe</p>
    <p class="mt-2">
       <a href="privacy.html" class="hover:text-white">Privacy Policy</a> |
       <a href="terms.html" class="hover:text-white">Terms & Conditions</a> |
       <a href="refund.html" class="hover:text-white">Refund Policy</a>
    </p>
  </footer>

  <script>
    // === Hamburger toggle (added) ===
    const menuBtn = document.getElementById("menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    if (menuBtn && mobileMenu) {
      menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    }
  </script>

  <script>
    const RZP_KEY_ID = "rzp_live_R6Ismz5vWsQvKg"; 

    const PLANS_DIAMOND = [
      { title: "PS5 Plan (1 Controller)", price_inr: 1999, features: ["1 controller", "1 hour/day", "21 days/month"] },
      { title: "PS5 Plan (2 Controllers)",  price_inr: 3999, features: ["2 controllers", "1 hour/day", "21 days/month"] },
      { title: "PS5 Plan (3 Controllers)",      price_inr: 4999, features: ["3 controllers", "1 hour/day", "21 days/month"] },
      { title: "PS5 Plan (4 Controllers)",   price_inr: 5999, features: ["4 controllers", "1 hour/day", "21 days/month"] },
      { title: "Pool Table Plan (1hr/day)", price_inr: 2999, features: ["1 hour/day", "21 days/month", "Max 4 people"] },
      { title: "Pool Table Plan (2hr/day)", price_inr: 5999, features: ["2 hours/day", "21 days/month", "Max 4 people"] }
    ];
    
    const PLANS_GOLD = [
      { title: "PS5 Plan (1 Controller)", price_inr: 1699, features: ["1 controller", "1 hour/day", "14 days/month"] },
      { title: "PS5 Plan (2 Controllers)",  price_inr: 2899, features: ["2 controllers", "1 hour/day", "14 days/month"] },
      { title: "PS5 Plan (3 Controllers)",      price_inr: 3699, features: ["3 controllers", "1 hour/day", "14 days/month"] },
      { title: "PS5 Plan (4 Controllers)",   price_inr: 4499, features: ["4 controllers", "1 hour/day", "14 days/month"] },
      { title: "Pool Table Plan (1hr/day)", price_inr: 2299, features: ["1 hour/day", "14 days/month", "Max 4 people"] },
      { title: "Pool Table Plan (2hr/day)", price_inr: 4299, features: ["2 hours/day", "14 days/month", "Max 4 people"] }
    ];

    const PLANS_SILVER = [
      { title: "PS5 Plan (1 Controller)", price_inr: 899, features: ["1 controller", "1 hour/day", "7 days/month"] },
      { title: "PS5 Plan (2 Controllers)",  price_inr: 1499, features: ["2 controllers", "1 hour/day", "7 days/month"] },
      { title: "PS5 Plan (3 Controllers)",      price_inr: 1899, features: ["3 controllers", "1 hour/day", "7 days/month"] },
      { title: "PS5 Plan (4 Controllers)",   price_inr: 2299, features: ["4 controllers", "1 hour/day", "7 days/month"] },
      { title: "Pool Table Plan (1hr/day)", price_inr: 1199, features: ["1 hour/day", "7 days/month", "Max 4 people"] },
      { title: "Pool Table Plan (2hr/day)", price_inr: 2199, features: ["2 hours/day", "7 days/month", "Max 4 people"] }
    ];

    const $name = document.getElementById("name");
    const $wa = document.getElementById("wa");
    const $plansGridDiamond = document.getElementById("plans-grid-diamond");
    const $plansGridGold = document.getElementById("plans-grid-gold");
    const $plansGridSilver = document.getElementById("plans-grid-silver");
    const $toast = document.getElementById("toast");
    const $advisorModal = document.getElementById("advisorModal");
    const $planAdvisorBtn = document.getElementById("planAdvisorBtn");
    const $getAdvisorBtn = document.getElementById("getAdvisorBtn");
    const $advisorPrompt = document.getElementById("advisorPrompt");
    
    document.getElementById("year").textContent = new Date().getFullYear();

    // Advisor Modal Logic
    $planAdvisorBtn.addEventListener("click", () => $advisorModal.style.display = "block");
    $advisorModal.querySelector(".close-btn").addEventListener("click", () => $advisorModal.style.display = "none");
    window.addEventListener("click", (e) => {
        if (e.target == $advisorModal) $advisorModal.style.display = "none";
    });

    $getAdvisorBtn.addEventListener("click", async () => {
        const userPrompt = $advisorPrompt.value.trim();
        if (!userPrompt) {
            toast("Please describe your gaming habits.");
            return;
        }

        $getAdvisorBtn.disabled = true;
        $getAdvisorBtn.textContent = "Thinking...";

        const prompt = `Based on the following user description, recommend one of our gaming plans: Silver (7 days), Gold (14 days), or Diamond (21 days). Only return the name of the plan (Silver, Gold, or Diamond). User description: "${userPrompt}"`;

        try {
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "AIzaSyBrN3Rr9f1vK8bwb7eLEOeOI9Qs29hKXPw";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            
            if (result.candidates && result.candidates.length > 0) {
                const text = result.candidates[0].content.parts[0].text.toLowerCase();
                let planId = "";
                if (text.includes("silver")) planId = "silver-plans";
                else if (text.includes("gold")) planId = "gold-plans";
                else if (text.includes("diamond")) planId = "diamond-plans";
                
                if (planId) {
                    toast(`We recommend the ${planId.split("-")[0]} plan for you!`);
                    document.getElementById(planId).scrollIntoView({ behavior: 'smooth' });
                    $advisorModal.style.display = "none";
                } else {
                    toast("Sorry, I couldn't determine the best plan. Please try again.");
                }
            } else {
                toast("Sorry, I couldn't get a recommendation. Please try again.");
            }
        } catch (error) {
            console.error("Gemini API Error:", error);
            toast("An error occurred while getting your recommendation.");
        } finally {
            $getAdvisorBtn.disabled = false;
            $getAdvisorBtn.textContent = "Get Recommendation";
        }
    });


    // Persist inputs
    $name.value = localStorage.getItem("hm_name") || "";
    $wa.value = localStorage.getItem("hm_wa") || "";
    $name.addEventListener("input", () => localStorage.setItem("hm_name", $name.value));
    $wa.addEventListener("input", () => {
      $wa.value = $wa.value.replace(/\D/g,"").slice(0,10);
      localStorage.setItem("hm_wa", $wa.value);
    });
    
    function toast(html){
      $toast.innerHTML = html;
      $toast.classList.add("show");
      setTimeout(()=> $toast.classList.remove("show"), 6000);
    }

    function normalizeIndianPhone(raw){
      const d = String(raw||"").replace(/\D/g,"");
      if (d.length===10) return "91"+d;
      if (d.startsWith("91") && d.length===12) return d;
      return "";
    }

    function createPlanCard(plan) {
      const el = document.createElement("div");
      el.className = "card p-5 flex flex-col";
      el.innerHTML = `
        <div class="flex-grow">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-base font-bold">${plan.title}</h3>
            </div>
            <div class="text-xl font-extrabold text-[var(--primary-glow)]" style="text-shadow: 0 0 8px var(--primary-glow);">₹${plan.price_inr}</div>
          </div>
          <ul class="mt-4 text-sm text-slate-300 list-disc list-inside space-y-1">
            ${plan.features.map(b => `<li>${b}</li>`).join("")}
          </ul>
        </div>
        <div class="mt-5">
          <button class="btn px-4 py-2 w-full">Pay ₹${plan.price_inr}</button>
        </div>
      `;
      el.querySelector("button").addEventListener("click", () => startPayment(plan));
      return el;
    }

    function renderPlans(gridElement, plansArray) {
      gridElement.innerHTML = "";
      plansArray.forEach(p => gridElement.appendChild(createPlanCard(p)));
    }
    
    renderPlans($plansGridSilver, PLANS_SILVER);
    renderPlans($plansGridGold, PLANS_GOLD);
    renderPlans($plansGridDiamond, PLANS_DIAMOND);

    function startPayment(plan) {
      const name = ($name.value || "").trim();
      const phoneLocal = ($wa.value || "").trim();
      const phoneE164 = normalizeIndianPhone(phoneLocal);

      if (!name) { toast("Please enter your name"); return; }
      if (!phoneE164) { toast("Enter a valid 10-digit WhatsApp number"); return; }

      const options = {
        key: RZP_KEY_ID,
        amount: plan.price_inr * 100, // amount in paise
        currency: "INR",
        name: "Hakuna Matata Gaming",
        description: `Payment for ${plan.title}`,
        prefill: {
          name: name,
          contact: phoneLocal
        },
        notes: {
          plan: plan.title,
          phone: phoneE164
        },
        theme: {
          color: "#c0c0c0"
        },
        handler: function(response) {
          console.log("Payment successful", response);
          toast("<strong>Payment successful!</strong><br/>Check WhatsApp for confirmation.");
        },
        modal: {
          ondismiss: function() {
            console.log('Checkout form was closed');
          }
        }
      };

      try {
        const rzp = new Razorpay(options);
        rzp.on("payment.failed", function(resp) {
          console.error("Payment Failed", resp);
          toast("Payment Failed: " + (resp?.error?.description || "Please try again."));
        });
        rzp.open();
      } catch (e) {
        console.error("Razorpay Error:", e);
        toast("Error: Could not open payment window.");
      }
    }
  </script>
</body>
</html>
